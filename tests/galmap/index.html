<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8" />
        <title>Game Tests: Galactic Map</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="author" content="Sven Scharfenberg" />
        <link rel="stylesheet" href="../../public/css/main.css" />
        <script src="../../public/javascripts/vendor/modernizr/modernizr-2.6.3.min.js"></script>
    </head>
    <body>

        <h1>Game Tests: Galactic Map</h1>
        <ul>
            <li>IE9+, other somewhat modern browsers (canvas, canvastext)</li>
            <li>map data is fetched from server via JSON.</li>
            <li>map stage is fluid; while the canvas is not. Smaller Screen size - smaller viewport for map, map is not scaled (css scaling of canvas sucks big time).<br />NO window.resize handler since noone but devs does it anyway.</li>
            <li>Map and ruler are draggable - drag one and both change.</li>
            <li>check for collision with edges - map can not be dragged too far</li>
            <li>stars can be interacted with. at the moment, click on a star just outputs debug info to console since this is just a test. exact integration of map tbd.</li>
            <li>Map can be zoomed. Variable number of zoom levels available. Since we do not scale the map but rather redraw it, the position of the central tile is remembered and the square centered after "zooming".</li>
            <li>Zoom level and the focussed coordinates are saved via localStorage</li>
        </ul>

        <section class="map galactic clearfix">

            <div class="overlay loading">
                <div class="dialog loading">
                    <header>
                        <h1>Fetching Data From Server</h1>
                    </header>
                    <p>Please Wait.</p>
                    <div class="animation"></div>
                </div><!-- /dialog.loading -->
            </div><!-- /.overlay.loading -->
            <div class="overlay jsonfail">
                <div class="dialog jsonfail">
                    <header>
                        <h1>Error Fetching Data From Server.</h1>
                    </header>
                    <p>The server did not send the requested map data. Please check your internet connection, then</p>
                    <p><a href="" class="action button refresh">Try Again</a></p>
                </div><!-- /.dialog.jsonfail -->
            </div><!-- /.overlay.jsonfail -->
            <div class="dialog starinfo">
                <header>
                    <h1>Star System ID: <span class="id"></span></h1>

                </header>
            </div><!-- /.dialog.starinfo -->
            <div class="hiddenImages">
                <img src="../../public/images/galmap/stars.png" id="spriteStars" />
            </div><!-- /.image.preloader -->

            <div class="theatre clearfix">
                <div class="stage left">
                    <a href="" class="mapbutton focushome">home</a>
                    <div id="viewPortRulerVert">
                        <canvas id="rulerVertCanvas"></canvas>
                    </div>
                </div><!-- /.stage.left -->
                <div class="stage right">
                    <div id="viewPortRulerHorz">
                        <canvas id="rulerHorzCanvas"></canvas>
                    </div>
                    <div id="mapViewPort">
                        <canvas id="mapCanvas"></canvas><!-- TODO: remove width/height attributes -->
                    </div>
                    <nav role="navigation" class="zoom clearfix">
                        <div id="currentZoomMarker">
                            <span>80</span><span>65</span><span>50</span><span>35</span><span>20</span>
                        </div><!-- /#currentZoomMarker -->
                        <a href="#" class="icon in">+</a>
                        <a href="#" class="icon out">-</a>
                    </nav>
                </div><!-- /.stage.right -->
            </div><!-- /.theatre -->

        </section><!-- /.map.galactic -->

        <p>TODO:</p>
        <ul>
            <li>Arrows for fleet movement</li>
            <li>click on star - info window</li>
        </ul>

<!-- bo Asynchronuous Javascripts ================================================================================== -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../public/javascripts/vendor/jquery/jquery-2.0.3.min.js"><\/script>')</script>
        <script src="../../public/javascripts/vendor/jquery/jcanvas/jcanvas.min.js"></script>
        <script src="../../public/javascripts/vendor/jquery/jquery.event.drag/jquery.event.drag-2.2.min.js"></script>
        <script src="../../public/javascripts/utils.src.js"></script>
        <script src="../../public/javascripts/galmap.src.js"></script>
<!-- eo Asynchronuous Javascripts ================================================================================== -->
    </body>
</html>
