(function(aS,aa,aR,aq,a7,Z,G,ay,ax){var ae,D=aS.extend,A=aS.inArray,aE=aS.type,aT=aS.isFunction,S=aq.round,av=aq.PI,aM=aq.sin,E=aq.cos,ap=aq.atan2,a6=aS.event.fix,F,V,a4,R={},aL={},az={},P={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},B,h;function s(bj){var bk=this;D(bk,bj);return bk}function m(bj){if(bj){D(s.prototype,bj)}else{m.prefs=s.prototype=D({},ae)}return this}aS.fn.jCanvas=m;m.events={};ae={align:"center",arrowAngle:90,arrowRadius:0,autosave:Z,baseline:"middle",bringToFront:G,ccw:G,closed:G,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:Z,cursor:ay,cursors:ay,disableEvents:G,draggable:G,dragGroups:ay,group:ay,groups:ay,data:{},each:ay,end:360,fillStyle:"transparent",fireDragGroupEvents:G,fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:Z,fn:ay,height:ay,imageSmoothing:Z,inDegrees:Z,index:ay,lineHeight:1,layer:G,load:ay,mask:G,maxWidth:ay,miterLimit:10,name:ay,opacity:1,r1:ay,r2:ay,radius:0,repeat:"repeat",respectAlign:G,rotate:0,rounded:G,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:false,shadowX:0,shadowY:0,sHeight:ay,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:ay,sx:ay,sy:ay,text:"",translate:0,translateX:0,translateY:0,type:ay,visible:Z,width:ay,x:0,y:0};m();function a5(bj){return(aE(bj)==="string")}function aX(bj){return(bj&&bj.getContext?bj.getContext("2d"):ay)}function be(bj){bj=D({},bj);bj.masks=bj.masks.slice(0);return bj}function a2(bj,bl){var bk;bj.save();bk=be(bl.transforms);bl.savedTransforms.push(bk)}function T(bj,bk){if(bk.savedTransforms.length===0){bk.transforms=be(P)}else{bj.restore();bk.transforms=bk.savedTransforms.pop()}}function aF(bk,bj,bl){if(aT(bl.fillStyle)){bj.fillStyle=bl.fillStyle.call(bk,bl)}else{bj.fillStyle=bl.fillStyle}if(aT(bl.strokeStyle)){bj.strokeStyle=bl.strokeStyle.call(bk,bl)}else{bj.strokeStyle=bl.strokeStyle}bj.lineWidth=bl.strokeWidth;if(bl.rounded){bj.lineCap=bj.lineJoin="round"}else{bj.lineCap=bl.strokeCap;bj.lineJoin=bl.strokeJoin;bj.miterLimit=bl.miterLimit}bj.shadowOffsetX=bl.shadowX;bj.shadowOffsetY=bl.shadowY;bj.shadowBlur=bl.shadowBlur;bj.shadowColor=bl.shadowColor;bj.globalAlpha=bl.opacity;bj.globalCompositeOperation=bl.compositing;if(bl.imageSmoothing){bj.webkitImageSmoothingEnabled=bj.mozImageSmoothingEnabled=bl.imageSmoothing}}function bf(bj,bk,bl){if(bl.mask){if(bl.autosave){a2(bj,bk)}bj.clip();bk.transforms.masks.push(bl._args)}}function u(bj,bk){if(bk._transformed){bj.restore()}}function aK(bk,bj,bm){var bl;if(bm.closed){bj.closePath()}if(bm.shadowStroke&&bm.strokeWidth!==0){bj.stroke();bj.fill();bj.shadowColor="transparent";bj.shadowBlur=0;bj.stroke()}else{bj.fill();if(bm.fillStyle!=="transparent"){bj.shadowColor="transparent"}if(bm.strokeWidth!==0){bj.stroke()}}if(!bm.closed){bj.closePath()}u(bj,bm);if(bm.mask){bl=aH(bk);bf(bj,bl,bm)}}function L(bj,bl,bk){bl._toRad=(bl.inDegrees?(av/180):1);bj.translate(bl.x,bl.y);bj.rotate(bl.rotate*bl._toRad);bj.translate(-bl.x,-bl.y);if(bk){bk.rotate+=(bl.rotate*bl._toRad)}}function H(bj,bl,bk){if(bl.scale!==1){bl.scaleX=bl.scaleY=bl.scale}bj.translate(bl.x,bl.y);bj.scale(bl.scaleX,bl.scaleY);bj.translate(-bl.x,-bl.y);if(bk){bk.scaleX*=bl.scaleX;bk.scaleY*=bl.scaleY}}function aQ(bj,bl,bk){if(bl.translate){bl.translateX=bl.translateY=bl.translate}bj.translate(bl.translateX,bl.translateY);if(bk){bk.translateX+=bl.translateX;bk.translateY+=bl.translateY}}function x(bl,bk,bn,bm,bj){bn._toRad=(bn.inDegrees?(av/180):1);bn.arrowAngle*=bn._toRad;bn._transformed=Z;bk.save();if(bj===ax){bj=bm}if(!bn.fromCenter&&!bn._centered){bn.x+=bm/2;bn.y+=bj/2;bn._centered=Z}if(bn.rotate){L(bk,bn,{})}if(bn.scale!==1||bn.scaleX!==1||bn.scaleY!==1){H(bk,bn,{})}if(bn.translate||bn.translateX||bn.translateY){aQ(bk,bn,{})}}m.extend=function au(bk){m.defaults=D(ae,bk.props);m();if(bk.name){aS.fn[bk.name]=function bj(bn){var bp=this,bm,bq,bl,br,bo;for(bq=0;bq<bp.length;bq+=1){bm=bp[bq];bl=aX(bm);if(bl){br=new s(bn);bo=ba(bm,br,bn,bj);aF(bm,bl,br);bk.fn.call(bm,bl,br)}}return bp}}return aS.fn[bk.name]};function aH(bj){var bk;if(R._canvas===bj&&R._data){bk=R._data}else{bk=aS.data(bj,"jCanvas");if(!bk){bk={canvas:bj,layers:[],layer:{names:{},groups:{}},intersecting:[],lastIntersected:ay,cursor:aS(bj).css("cursor"),drag:{},event:{type:ay,x:ay,y:ay},events:{},transforms:be(P),savedTransforms:[],animating:G,animated:ay,pos:0,pixelRatio:1,scaled:false};aS.data(bj,"jCanvas",bk)}R._canvas=bj;R._data=bk}return bk}aS.fn.getLayers=function r(bo){var bk=this[0],bl,bm,bj,bn=[];if(bk&&bk.getContext){bl=aH(bk);bm=bl.layers;if(aT(bo)){for(bj=0;bj<bm.length;bj+=1){if(bo.call(bk,bm[bj])){bn.push(bm[bj])}}}else{bn=bm}}return bn};function aP(bl,bm,bk){var bj;for(bj in m.events){if(m.events.hasOwnProperty(bj)){if(bk[bj]||(bk.cursors&&bk.cursors[bj])){e(bl,bm,bk,bj)}}}}function e(bl,bm,bk,bj){bj=ac(bj);m.events[bj](bl,bm);bk._event=Z}function bc(bm,bn,bl){var bo,bj,bk;if(bl.draggable||bl.cursor||bl.cursors){bo=["mousedown","mousemove","mouseup"];for(bk=0;bk<bo.length;bk+=1){bj=bo[bk];e(bm,bn,bl,bj)}if(!bn.events.mouseoutdrag){bm.bind("mouseout.jCanvas",function(){var bp=bn.drag.layer;if(bp){bn.drag={};if(bp.dragcancel){bp.dragcancel.call(bm[0],bp)}bm.drawLayers()}});bn.events.mouseoutdrag=Z}bl._event=Z}}function v(bl,bm,bj,bk){var bn=bm.layer.names;if(!bk){bk=bj}else{if(bk.name!==ax&&a5(bj.name)&&bj.name!==bk.name){delete bn[bj.name]}}if(a5(bk.name)){bn[bk.name]=bj}}function ad(bq,bl,bn,bp){var bj=bl.layer.groups,br,bs,bm,bo,bk;if(bn.group!==ay){bn.groups=[bn.group];if(bn.dragGroupWithLayer){bn.dragGroups=[bn.group]}}if(bp&&bp.group!==ax){if(bp.group===ay){bp.groups=ay}else{bp.groups=[bp.group];if(bp.dragGroupWithLayer){bp.dragGroups=[bp.group]}}}if(!bp){bp=bn}else{if(bp.groups!==ax&&bn.groups!==ay){for(bm=0;bm<bn.groups.length;bm+=1){bs=bn.groups[bm];br=bj[bs];if(br){for(bk=0;bk<br.length;bk+=1){if(br[bk]===bn){bo=bk;br.splice(bk,1);break}}if(br.length===0){delete bj[bs]}}}}}if(bp.groups!==ax&&bp.groups!==ay){for(bm=0;bm<bp.groups.length;bm+=1){bs=bp.groups[bm];br=bj[bs];if(!br){br=bj[bs]=[];br.name=bs}if(bo===ax){bo=br.length}br.splice(bo,0,bn)}}}aS.fn.getLayer=function at(bk){var bl=this[0],bo=aH(bl),bp=bo.layers,bn=aE(bk),bm,bj;if(bk&&bk.layer){bm=bk}else{if(bn==="number"){if(bk<0){bk=bp.length+bk}bm=bp[bk]}else{if(bn==="regexp"){for(bj=0;bj<bp.length;bj+=1){if(a5(bp[bj].name)&&bp[bj].name.match(bk)){bm=bp[bj];break}}}else{bm=bo.layer.names[bk]}}}return bm};aS.fn.getLayerGroup=function b(bl){var bk=aE(bl),bj,bo,bn,bm;if(bk==="array"){return bl}else{if(bk==="regexp"){bm=aH(this[0]);bj=bm.groups;for(bo in bj){if(bo.match(bl)){bn=bj[bo];break}}}else{bm=aH(this[0]);bn=bm.layer.groups[bl]}}return bn};aS.fn.getLayerIndex=function W(bj){var bl=this,bm=bl.getLayers(),bk=bl.getLayer(bj);return A(bk,bm)};aS.fn.setLayer=function t(bj,bm){var bl=this,bn,bp,bo,bk;for(bp=0;bp<bl.length;bp+=1){bn=aS(bl[bp]);bo=aH(bl[bp]);bk=aS(bl[bp]).getLayer(bj);if(bk){v(bn,bo,bk,bm);ad(bn,bo,bk,bm);if(bm.index!==ax){bn.moveLayer(bk,bm.index)}D(bk,bm);aP(bn,bo,bk);bc(bn,bo,bk)}}return bl};aS.fn.setLayerGroup=function a3(bl,bm){var bk=this,bn,bp,bo,bj;for(bp=0;bp<bk.length;bp+=1){bn=aS(bk[bp]);bo=bn.getLayerGroup(bl);if(bo){for(bj=0;bj<bo.length;bj+=1){bn.setLayer(bo[bj],bm)}}}return bk};aS.fn.setLayers=function aN(bl,bp){var bk=this,bm,bo,bn,bj;for(bo=0;bo<bk.length;bo+=1){bm=aS(bk[bo]);bn=bm.getLayers(bp);for(bj=0;bj<bn.length;bj+=1){bm.setLayer(bn[bj],bl)}}return bk};aS.fn.moveLayer=function a(bj,bk){var bm=this,bn,bp,bo,bl;for(bp=0;bp<bm.length;bp+=1){bn=aS(bm[bp]);bo=bn.getLayers();bl=bn.getLayer(bj);if(bl){bl.index=A(bl,bo);bo.splice(bl.index,1);bo.splice(bk,0,bl);if(bk<0){bk=bo.length+bk}bl.index=bk}}return bm};aS.fn.removeLayer=function ab(bj){var bl=this,bm,bp,bn,bo,bk;for(bp=0;bp<bl.length;bp+=1){bm=aS(bl[bp]);bn=aH(bl[bp]);bo=bm.getLayers();bk=bm.getLayer(bj);if(bk){bk.index=A(bk,bo);bo.splice(bk.index,1);v(bm,bn,bk,{name:ay});ad(bm,bn,bk,{groups:ay})}}return bl};aS.fn.removeLayerGroup=function aJ(bk){var bn=this,bq,bp,bm,bl,br,bo,bj;if(bk!==ax){for(bp=0;bp<bn.length;bp+=1){bq=aS(bn[bp]);bm=aH(bn[bp]);bl=bq.getLayers();br=bq.getLayerGroup(bk);if(br){for(bj=0;bj<br.length;bj+=1){bo=br[bj];bo.index=A(bo,bl);bl.splice(bo.index,1);v(bq,bm,bo,{name:ay})}delete bm.layer.groups[br.name]}}}return bn};aS.fn.removeLayers=function M(){var bj=this,bk,bm,bl;for(bm=0;bm<bj.length;bm+=1){bk=aS(bj[bm]);bl=aH(bj[bm]);bl.layers.length=0;bl.layer.names={};bl.layer.groups={}}return bj};aS.fn.addLayerToGroup=function n(bk,bp){var bm=this,bn,bo,bl,bj=[];for(bo=0;bo<bm.length;bo+=1){bn=aS(bm[bo]);bl=bn.getLayer(bk);if(bl.groups&&A(bp,bl.groups)===-1){bj=bl.groups.slice(0);bj.push(bp);bn.setLayer(bl,{groups:bj})}}return bm};aS.fn.removeLayerFromGroup=function aA(bk,bq){var bn=this,bo,bp,bm,bj=[],bl;for(bp=0;bp<bn.length;bp+=1){bo=aS(bn[bp]);bm=bo.getLayer(bk);bl=A(bq,bm.groups);if(bl!==-1){bj=bm.groups.slice(0);bj.splice(bl,1);bo.setLayer(bm,{groups:bj})}}return bn};function am(bm){var bl,bk,bj;bl={};for(bk=bm.intersecting.length-1;bk>=0;bk-=1){bl=bm.intersecting[bk];if(bl._masks){for(bj=bl._masks.length-1;bj>=0;bj-=1){if(!bl._masks[bj].intersects){bl.intersects=G;break}}if(bl.intersects){break}}}return bl}function bb(bm,bj,bl,bk){if(bl&&bl.visible&&bl._method){if(bk){bl._next=bk}else{bl._next=ay}bl._method.call(bm,bl)}}aS.fn.drawLayer=function aD(bk){var bm=this,bo,bj,bn,bl;for(bo=0;bo<bm.length;bo+=1){bn=aS(bm[bo]);bj=aX(bm[bo]);bl=bn.getLayer(bk);bb(bn,bj,bl)}return bm};function f(br,bn,bj){var bm,bq,bl,bo,bk,bs,bt,bp;bo=bn.drag;bq=bo.layer;bk=bq.dragGroups||[];bm=bn.layers;if((bj==="mousemove"||bj==="touchmove")){if(!bo.dragging){bo.dragging=Z;if(bq.bringToFront){bm.splice(bq.index,1);bq.index=bm.push(bq)}for(bp=0;bp<bk.length;bp+=1){bt=bk[bp];bs=bn.layer.groups[bt];if(bq.groups&&bs){for(bl=0;bl<bs.length;bl+=1){if(bs[bl]!==bq){bs[bl]._startX=bs[bl].x;bs[bl]._startY=bs[bl].y;bs[bl]._endX=bq._eventX;bs[bl]._endY=bq._eventY;if(bs[bl].bringToFront){bs[bl].index=A(bs[bl],bm);bm.splice(bs[bl].index,1);bm.splice(-1,0,bs[bl]);bs[bl].index=bm.length-2}if(bs[bl].dragstart&&bq.fireDragGroupEvents){bs[bl].dragstart.call(br[0],bs[bl])}}}}}bo._startX=bq._startX=bq.x;bo._startY=bq._startY=bq.y;bo._endX=bq._endX=bq._eventX;bo._endY=bq._endY=bq._eventY;Y(br,bq,"dragstart")}bq.x=bq._eventX-(bo._endX-bo._startX);bq.y=bq._eventY-(bo._endY-bo._startY);for(bp=0;bp<bk.length;bp+=1){bt=bk[bp];bs=bn.layer.groups[bt];if(bq.groups&&bs){for(bl=0;bl<bs.length;bl+=1){if(bs[bl]!==bq){bs[bl].x=bq._eventX-(bs[bl]._endX-bs[bl]._startX);bs[bl].y=bq._eventY-(bs[bl]._endY-bs[bl]._startY);if(bs[bl].drag&&bq.fireDragGroupEvents){bs[bl].drag.call(br[0],bs[bl])}}}}}Y(br,bq,"drag")}else{if((bj==="mouseup"||bj==="touchend")){if(bo.dragging){Y(br,bq,"dragstop");bo.dragging=G}for(bp=0;bp<bk.length;bp+=1){bt=bk[bp];bs=bn.layer.groups[bt];if(bq.groups&&bs){for(bl=0;bl<bs.length;bl+=1){if(bs[bl]!==bq){if(bs[bl].dragstop&&bq.fireDragGroupEvents){bs[bl].dragstop.call(br[0],bs[bl])}}}}}bn.drag={}}}}function Y(bl,bk,bj,bm){if(!bm){if(bk.cursors){bm=bk.cursors[bj]}else{bm=bk.cursor}}if(bm){bl.css({cursor:bm})}if(bk[bj]){bk[bj].call(bl[0],bk)}}aS.fn.drawLayers=function a0(bv){var bo=this,bw,bu,bx,bl=D({},bv),bn,bt,bq,bk,bs,bm,br,bj,bp;if(!bl.index){bl.index=0}for(bu=0;bu<bo.length;bu+=1){bw=aS(bo[bu]);bx=aX(bo[bu]);if(bx){bm=aH(bo[bu]);if(bl.clear!==G){bw.clearCanvas()}bn=bm.layers;for(bk=bl.index;bk<bn.length;bk+=1){bt=bn[bk];bt.index=bk;if(bl.resetFire){bt._fired=G}bt._event=!bt.disableEvents;bb(bw,bx,bt,bk+1);bt._masks=bm.transforms.masks.slice(0);if(bt._method===aS.fn.drawImage&&bt.visible){break}}bs=bk;bt=am(bm);br=bm.event;bj=br.type;if(!bt[bj]){bj=a1(bj)}bp=bm.drag;bq=bm.lastIntersected;if(bq!==ay&&bt!==bq&&bq._hovered&&!bq._fired){bm.lastIntersected=ay;bq._fired=Z;bq._hovered=G;Y(bw,bq,"mouseout",bm.cursor)}if(bt._event&&bt.intersects){bm.lastIntersected=bt;if(bt.mouseover||bt.mouseout||bt.cursor||bt.cursors){if(!bt._hovered&&!bt._fired){bt._fired=Z;bt._hovered=Z;Y(bw,bt,"mouseover")}}if(!bt._fired){bt._fired=Z;br.type=ay;Y(bw,bt,bj)}if(bt.draggable&&(bj==="mousedown"||bj==="touchstart")){bp.layer=bt}}if(bp.layer){f(bw,bm,bj)}if(bs===bn.length){bm.intersecting.length=0;bm.transforms=be(P);bm.savedTransforms.length=0}}}return bo};function ba(bk,bp,bj,bq){var bm,bo,bl=bp,bn;bp._args=bj;bp.canvas=bk;if(bp.draggable||bp.dragGroups){bp.layer=Z;bp.draggable=Z}if(bq){bp._method=bq}else{if(bp.method){bp._method=aS.fn[bp.method]}else{if(bp.type){bp._method=aS.fn[a4[bp.type]]}else{bp._method=function(){}}}}if(bp.layer&&!bp._layer){bm=aS(bk);bo=bm.getLayers();bn=aH(bk);bl=new s(bp);bl.layer=Z;bl._layer=Z;v(bm,bn,bl);ad(bm,bn,bl);aP(bm,bn,bl);bc(bm,bn,bl);bp._event=bl._event;if(bl.index===ay){bl.index=bo.length}bo.splice(bl.index,0,bl)}return bl}aS.fn.addLayer=function X(bk){var bl=this,bm,bj,bn;for(bm=0;bm<bl.length;bm+=1){bj=aX(bl[bm]);if(bj){bn=new s(bk);bn.layer=Z;ba(bl[bm],bn,bk)}}return bl};B=["width","height","opacity","lineHeight"];h={};function g(bl){var bj,bk;for(bk=0;bk<B.length;bk+=1){bj=B[bk];bl[bj]=bl["_"+bj]}}function an(bm,bk){var bj,bl;for(bl=0;bl<B.length;bl+=1){bj=B[bl];bm["_"+bj]=bm[bj];h[bj]=Z;if(bk){delete bm[bj]}}}function z(bj,bk,bm){var bl;for(bl in bm){if(bm.hasOwnProperty(bl)){if(aT(bm[bl])){bm[bl]=bm[bl].call(bj,bk,bl)}}}return bm}function y(bk){var bn,bm,bl=[],bj=1;if(bk.match(/^#?\w+$/gi)){if(bk==="transparent"){bk="rgba(0,0,0,0)"}bm=aa.head;bn=bm.style.color;bm.style.color=bk;bk=aS.css(bm,"color");bm.style.color=bn}if(bk.match(/^rgb/gi)){bl=bk.match(/\d+/gi);if(bk.match(/%/gi)){bj=2.55}bl[0]*=bj;bl[1]*=bj;bl[2]*=bj;if(bl[3]!==ax){bl[3]=a7(bl[3])}else{bl[3]=1}}return bl}function aV(bk){var bl=3,bj;if(aE(bk.start)!=="array"){bk.start=y(bk.start);bk.end=y(bk.end)}bk.now=[];if(bk.start[3]!==1||bk.end[3]!==1){bl=4}for(bj=0;bj<bl;bj+=1){bk.now[bj]=bk.start[bj]+(bk.end[bj]-bk.start[bj])*bk.pos;if(bj<3){bk.now[bj]=S(bk.now[bj])}}if(bk.start[3]!==1||bk.end[3]!==1){bk.now="rgba("+bk.now.join(",")+")"}else{bk.now.slice(0,3);bk.now="rgb("+bk.now.join(",")+")"}if(bk.elem.nodeName){bk.elem.style[bk.prop]=bk.now}else{bk.elem[bk.prop]=bk.now}}aS.fn.animateLayer=function bi(){var bm=this,br,bo,bs,bp=([]).slice.call(arguments,0),bl,bn,bq;if(aE(bp[2])==="object"){bp.splice(2,0,bp[2].duration||ay);bp.splice(3,0,bp[3].easing||ay);bp.splice(4,0,bp[4].done||bp[4].complete||ay);bp.splice(5,0,bp[5].step||ay)}else{if(bp[2]===ax){bp.splice(2,0,ay);bp.splice(3,0,ay);bp.splice(4,0,ay)}else{if(aT(bp[2])){bp.splice(2,0,ay);bp.splice(3,0,ay)}}if(bp[3]===ax){bp[3]=ay;bp.splice(4,0,ay)}else{if(aT(bp[3])){bp.splice(3,0,ay)}}}function bj(bu,bv,bt){return function(){g(bt);if(!bv.animating||bv.animated===bt){bu.drawLayers()}if(bp[4]){bp[4].call(bu[0],bt)}bt._animating=G;bv.animating=G;bv.animated=ay}}function bk(bu,bv,bt){return function(bw,bx){if(bt._pos!==bx.pos){bt._pos=bx.pos;g(bt);if(!bt._animating&&!bv.animating){bt._animating=Z;bv.animating=Z;bv.animated=bt}if(!bv.animating||bv.animated===bt){bu.drawLayers()}if(bp[5]){bp[5].call(bu[0],bw,bx,bt)}}}}for(bo=0;bo<bm.length;bo+=1){br=aS(bm[bo]);bs=aX(bm[bo]);if(bs){bl=aH(bm[bo]);bn=br.getLayer(bp[0]);if(bn&&bn._method!==aS.fn.draw){bq=D({},bp[1]);bq=z(bm[bo],bn,bq);an(bq,Z);an(bn);bn.style=h;aS(bn).animate(bq,{duration:bp[2],easing:(aS.easing[bp[3]]?bp[3]:ay),complete:bj(br,bl,bn),step:bk(br,bl,bn)})}}}return bm};aS.fn.animateLayerGroup=function bh(bm){var bl=this,bn,bp,bk=([]).slice.call(arguments,0),bo,bj;for(bp=0;bp<bl.length;bp+=1){bn=aS(bl[bp]);bo=bn.getLayerGroup(bm);if(bo){for(bj=0;bj<bo.length;bj+=1){bn.animateLayer.apply(bn,[bo[bj]].concat(bk.slice(1)))}}}return bl};aS.fn.delayLayer=function ao(bj,bn){var bl=this,bm,bk;bn=bn||0;for(bm=0;bm<bl.length;bm+=1){bk=aS(bl[bm]).getLayer(bj);aS(bk).delay(bn)}return bl};aS.fn.delayLayerGroup=function w(bm,bq){var bl=this,bn,bp,bo,bk,bj;bq=bq||0;for(bp=0;bp<bl.length;bp+=1){bn=aS(bl[bp]);bo=bn.getLayerGroup(bm);if(bo){for(bj=0;bj<bo.length;bj+=1){bk=bo[bj];if(bk){aS(bk).delay(bq)}}}}return bl};aS.fn.stopLayer=function q(bj,bm){var bl=this,bn,bo,bk;for(bo=0;bo<bl.length;bo+=1){bn=aS(bl[bo]);bk=bn.getLayer(bj);if(bk){aS(bk).stop(bm)}}return bl};aS.fn.stopLayerGroup=function aY(bm,bn){var bl=this,bo,bq,bp,bk,bj;for(bq=0;bq<bl.length;bq+=1){bo=aS(bl[bq]);bp=bo.getLayerGroup(bm);if(bp){for(bj=0;bj<bp.length;bj+=1){bk=bp[bj];if(bk){aS(bk).stop(bn)}}}}return bl};function a9(bj){var bk;for(bk=0;bk<bj.length;bk+=1){aS.fx.step[bj[bk]]=aV}}a9(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor"]);F={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};V={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"};function ac(bj){if(window.ontouchstart!==undefined){if(F[bj]){bj=F[bj]}}return bj}function a1(bj){if(V[bj]){bj=V[bj]}return bj}function ag(bj){m.events[bj]=function(bl,bm){var bn,bk;bk=bm.event;bn=(bj==="mouseover"||bj==="mouseout")?"mousemove":bj;if(!bm.events[bn]){bl.bind(bn+".jCanvas",function(bo){bk.x=bo.offsetX;bk.y=bo.offsetY;bk.type=bn;bk.event=bo;bl.drawLayers({resetFire:Z});bo.preventDefault()});bm.events[bn]=Z}}}function bd(bk){var bj;for(bj=0;bj<bk.length;bj+=1){ag(bk[bj])}}bd(["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchmove","touchend"]);function ah(bj,bt,bl){var bn,bm,bo,bp,bq,bs,br,bk;bn=bl._args;if(bn._event){bm=aH(bj);bo=bm.event;if(bo.x!==ay&&bo.y!==ay){bs=bo.x*bm.pixelRatio;br=bo.y*bm.pixelRatio;bp=bt.isPointInPath(bs,br)||(bt.isPointInStroke&&bt.isPointInStroke(bs,br))}bq=bm.transforms;bn.eventX=bn.mouseX=bo.x;bn.eventY=bn.mouseY=bo.y;bn.event=bo.event;bk=bm.transforms.rotate;bs=bn.eventX;br=bn.eventY;if(bk!==0){bn._eventX=(bs*E(-bk))-(br*aM(-bk));bn._eventY=(br*E(-bk))+(bs*aM(-bk))}else{bn._eventX=bs;bn._eventY=br}bn._eventX/=bq.scaleX;bn._eventY/=bq.scaleY;if(bp){bm.intersecting.push(bn)}bn.intersects=bp}}aS.event.fix=function(bk){var bm,bj,bl;bk=a6.call(aS.event,bk);bj=bk.originalEvent;if(bj){bl=bj.changedTouches;if(bk.pageX!==ax&&bk.offsetX===ax){bm=aS(bk.currentTarget).offset();if(bm){bk.offsetX=bk.pageX-bm.left;bk.offsetY=bk.pageY-bm.top}}else{if(bl){bm=aS(bk.currentTarget).offset();if(bm){bk.offsetX=bl[0].pageX-bm.left;bk.offsetY=bl[0].pageY-bm.top}}}}return bk};a4={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse","function":"draw",image:"drawImage",line:"drawLine",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector"};aS.fn.draw=function aB(bk){var bm=this,bn,bo,bj,bp=new s(bk),bl;if(a4[bp.type]){bm[a4[bp.type]](bp)}else{for(bo=0;bo<bm.length;bo+=1){bn=aS(bm[bo]);bj=aX(bm[bo]);if(bj){bp=new s(bk);bl=ba(bm[bo],bp,bk,aB);if(bp.visible){if(bp.fn){bp.fn.call(bm[bo],bj,bp)}}}}}return bm};aS.fn.clearCanvas=function U(bk){var bm=this,bn,bj,bo=new s(bk),bl;for(bn=0;bn<bm.length;bn+=1){bj=aX(bm[bn]);if(bj){if(bo.width===ay||bo.height===ay){bj.save();bj.setTransform(1,0,0,1,0,0);bj.clearRect(0,0,bm[bn].width,bm[bn].height);bj.restore()}else{bl=ba(bm[bn],bo,bk,U);x(bm[bn],bj,bo,bo.width,bo.height);bj.clearRect(bo.x-(bo.width/2),bo.y-(bo.height/2),bo.width,bo.height);u(bj,bo)}}}return bm};aS.fn.saveCanvas=function I(bk){var bn=this,bp,bj,bq,bm,bo,bl;for(bp=0;bp<bn.length;bp+=1){bj=aX(bn[bp]);if(bj){bo=aH(bn[bp]);bq=new s(bk);bm=ba(bn[bp],bq,bk,I);for(bl=0;bl<bq.count;bl+=1){a2(bj,bo)}}}return bn};aS.fn.restoreCanvas=function C(bk){var bn=this,bp,bj,bq,bm,bo,bl;for(bp=0;bp<bn.length;bp+=1){bj=aX(bn[bp]);if(bj){bo=aH(bn[bp]);bq=new s(bk);bm=ba(bn[bp],bq,bk,C);for(bl=0;bl<bq.count;bl+=1){T(bj,bo)}}}return bn};aS.fn.restoreCanvasOnRedraw=function aW(bj){var bk=this,bl=D({},bj);bl.layer=Z;bk.restoreCanvas(bl);return bk};aS.fn.rotateCanvas=function d(bk){var bm=this,bo,bj,bp,bl,bn;for(bo=0;bo<bm.length;bo+=1){bj=aX(bm[bo]);if(bj){bn=aH(bm[bo]);bp=new s(bk);bl=ba(bm[bo],bp,bk,d);if(bp.autosave){a2(bj,bn)}L(bj,bp,bn.transforms)}}return bm};aS.fn.scaleCanvas=function ar(bk){var bm=this,bo,bj,bp,bl,bn;for(bo=0;bo<bm.length;bo+=1){bj=aX(bm[bo]);if(bj){bn=aH(bm[bo]);bp=new s(bk);bl=ba(bm[bo],bp,bk,ar);if(bp.autosave){a2(bj,bn)}H(bj,bp,bn.transforms)}}return bm};aS.fn.translateCanvas=function ai(bk){var bm=this,bo,bj,bp,bl,bn;for(bo=0;bo<bm.length;bo+=1){bj=aX(bm[bo]);if(bj){bn=aH(bm[bo]);bp=new s(bk);bl=ba(bm[bo],bp,bk,ai);if(bp.autosave){a2(bj,bn)}aQ(bj,bp,bn.transforms)}}return bm};aS.fn.drawRect=function N(bq){var bn=this,bp,bt,bm,bo,bl,bs,bk,br,bj;for(bp=0;bp<bn.length;bp+=1){bt=aX(bn[bp]);if(bt){bm=new s(bq);bo=ba(bn[bp],bm,bq,N);if(bm.visible){aF(bn[bp],bt,bm);x(bn[bp],bt,bm,bm.width,bm.height);bt.beginPath();bl=bm.x-(bm.width/2);bs=bm.y-(bm.height/2);bj=bm.cornerRadius;if(bj){bm.closed=Z;bk=bm.x+(bm.width/2);br=bm.y+(bm.height/2);if((bk-bl)-(2*bj)<0){bj=(bk-bl)/2}if((br-bs)-(2*bj)<0){bj=(br-bs)/2}bt.moveTo(bl+bj,bs);bt.lineTo(bk-bj,bs);bt.arc(bk-bj,bs+bj,bj,3*av/2,av*2,G);bt.lineTo(bk,br-bj);bt.arc(bk-bj,br-bj,bj,0,av/2,G);bt.lineTo(bl+bj,br);bt.arc(bl+bj,br-bj,bj,av/2,av,G);bt.lineTo(bl,bs+bj);bt.arc(bl+bj,bs+bj,bj,av,3*av/2,G)}else{bt.rect(bl,bs,bm.width,bm.height)}ah(bn[bp],bt,bm);aK(bn[bp],bt,bm)}}}return bn};function af(bj){while(bj<0){bj+=(2*av)}return bj}function K(bk,bj){return bk.x+(bk.radius*E(bj))}function J(bk,bj){return bk.y+(bk.radius*aM(bj))}aS.fn.drawArc=function aI(br){var bn=this,bp,bw,bm,bo,bl,bu,bk,bt,bj,bs,bx,bq,bv;for(bp=0;bp<bn.length;bp+=1){bw=aX(bn[bp]);if(bw){bm=new s(br);bo=ba(bn[bp],bm,br,aI);if(bm.visible){aF(bn[bp],bw,bm);x(bn[bp],bw,bm,bm.radius*2);if(!bm.inDegrees&&bm.end===360){bm.end=av*2}bm.start*=bm._toRad;bm.end*=bm._toRad;bm.start-=(av/2);bm.end-=(av/2);bw.beginPath();bw.arc(bm.x,bm.y,bm.radius,bm.start,bm.end,bm.ccw);bv=av/180*1;if(bm.ccw){bv*=-1}bl=K(bm,bm.start+bv);bu=J(bm,bm.start+bv);bk=K(bm,bm.start);bt=J(bm,bm.start);bj=K(bm,bm.end+bv);bs=J(bm,bm.end+bv);bx=K(bm,bm.end);bq=J(bm,bm.end);aG(bn[bp],bw,bm,bl,bu,bk,bt,bx,bq,bj,bs);ah(bn[bp],bw,bm);aK(bn[bp],bw,bm)}}}return bn};aS.fn.drawEllipse=function c(bl){var bn=this,bp,bk,bq,bm,bo,bj;for(bp=0;bp<bn.length;bp+=1){bk=aX(bn[bp]);if(bk){bq=new s(bl);bm=ba(bn[bp],bq,bl,c);if(bq.visible){aF(bn[bp],bk,bq);x(bn[bp],bk,bq,bq.width,bq.height);bo=bq.width*(4/3);bj=bq.height;bk.beginPath();bk.moveTo(bq.x,bq.y-(bj/2));bk.bezierCurveTo(bq.x-(bo/2),bq.y-(bj/2),bq.x-(bo/2),bq.y+(bj/2),bq.x,bq.y+(bj/2));bk.bezierCurveTo(bq.x+(bo/2),bq.y+(bj/2),bq.x+(bo/2),bq.y-(bj/2),bq.x,bq.y-(bj/2));ah(bn[bp],bk,bq);bq.closed=Z;aK(bn[bp],bk,bq)}}}return bn};aS.fn.drawPolygon=function aO(bq){var bn=this,bp,bv,bl,bo,bj,bu,bk,bt,bs,br,bm;for(bp=0;bp<bn.length;bp+=1){bv=aX(bn[bp]);if(bv){bl=new s(bq);bo=ba(bn[bp],bl,bq,aO);if(bl.visible){aF(bn[bp],bv,bl);x(bn[bp],bv,bl,bl.radius*2);bu=(2*av)/bl.sides;bk=bu/2;bj=bk+(av/2);bt=bl.radius*E(bk);bv.beginPath();for(bm=0;bm<bl.sides;bm+=1){bs=bl.x+(bl.radius*E(bj));br=bl.y+(bl.radius*aM(bj));bv.lineTo(bs,br);if(bl.concavity){bs=bl.x+((bt+(-bt*bl.concavity))*E(bj+bk));br=bl.y+((bt+(-bt*bl.concavity))*aM(bj+bk));bv.lineTo(bs,br)}bj+=bu}ah(bn[bp],bv,bl);bl.closed=Z;aK(bn[bp],bv,bl)}}}return bn};aS.fn.drawSlice=function al(bo){var bl=this,bp,bn,br,bk,bm,bj,bs,bq;for(bn=0;bn<bl.length;bn+=1){bp=aS(bl[bn]);br=aX(bl[bn]);if(br){bk=new s(bo);bm=ba(bl[bn],bk,bo,al);if(bk.visible){aF(bl[bn],br,bk);x(bl[bn],br,bk,bk.radius*2);bk.start*=bk._toRad;bk.end*=bk._toRad;bk.start-=(av/2);bk.end-=(av/2);bk.start=af(bk.start);bk.end=af(bk.end);if(bk.end<bk.start){bk.end+=(2*av)}bj=((bk.start+bk.end)/2);bs=(bk.radius*bk.spread*E(bj));bq=(bk.radius*bk.spread*aM(bj));bk.x+=bs;bk.y+=bq;br.beginPath();br.arc(bk.x,bk.y,bk.radius,bk.start,bk.end,bk.ccw);br.lineTo(bk.x,bk.y);ah(bl[bn],br,bk);bk.closed=Z;aK(bl[bn],br,bk)}}}return bl};function i(bl,bw,bq,bk,bv,bj,bu){var bn,bm,br,bp,bt,bs,bo;if(bq.arrowRadius&&!bq.closed){bo=ap((bu-bv),(bj-bk));bo-=av;bt=(bq.strokeWidth*E(bo));bs=(bq.strokeWidth*aM(bo));bn=bj+(bq.arrowRadius*E(bo+(bq.arrowAngle/2)));bm=bu+(bq.arrowRadius*aM(bo+(bq.arrowAngle/2)));br=bj+(bq.arrowRadius*E(bo-(bq.arrowAngle/2)));bp=bu+(bq.arrowRadius*aM(bo-(bq.arrowAngle/2)));bw.moveTo(bn-bt,bm-bs);bw.lineTo(bj-bt,bu-bs);bw.lineTo(br-bt,bp-bs);bw.moveTo(bj-bt,bu-bs);bw.lineTo(bj+bt,bu+bs)}}function aG(bm,bs,bn,bl,br,bk,bq,bj,bp,bt,bo){if(bn.startArrow){i(bm,bs,bn,bl,br,bk,bq)}if(bn.endArrow){i(bm,bs,bn,bj,bp,bt,bo)}}aS.fn.drawLine=function Q(bq){var bn=this,bp,br,bm,bo,bl,bk,bj;for(bp=0;bp<bn.length;bp+=1){br=aX(bn[bp]);if(br){bm=new s(bq);bo=ba(bn[bp],bm,bq,Q);if(bm.visible){aF(bn[bp],br,bm);x(bn[bp],br,bm,0);bl=1;br.beginPath();while(Z){bk=bm["x"+bl];bj=bm["y"+bl];if(bk!==ax&&bj!==ax){br.lineTo(bk+bm.x,bj+bm.y);bl+=1}else{break}}bl-=1;aG(bn[bp],br,bm,bm.x2+bm.x,bm.y2+bm.y,bm.x1+bm.x,bm.y1+bm.y,bm["x"+(bl-1)]+bm.x,bm["y"+(bl-1)]+bm.y,bm["x"+bl]+bm.x,bm["y"+bl]+bm.y);ah(bn[bp],br,bm);aK(bn[bp],br,bm)}}}return bn};aS.fn.drawQuadratic=function aj(bq){var bn=this,bp,bt,bm,bo,bl,bk,bj,bs,br;for(bp=0;bp<bn.length;bp+=1){bt=aX(bn[bp]);if(bt){bm=new s(bq);bo=ba(bn[bp],bm,bq,aj);if(bm.visible){aF(bn[bp],bt,bm);x(bn[bp],bt,bm,0);bl=2;bt.beginPath();bt.moveTo(bm.x1+bm.x,bm.y1+bm.y);while(Z){bk=bm["x"+bl];bj=bm["y"+bl];bs=bm["cx"+(bl-1)];br=bm["cy"+(bl-1)];if(bk!==ax&&bj!==ax&&bs!==ax&&br!==ax){bt.quadraticCurveTo(bs+bm.x,br+bm.y,bk+bm.x,bj+bm.y);bl+=1}else{break}}bl-=1;aG(bn[bp],bt,bm,bm.cx1+bm.x,bm.cy1+bm.y,bm.x1+bm.x,bm.y1+bm.y,bm["cx"+(bl-1)]+bm.x,bm["cy"+(bl-1)]+bm.y,bm["x"+bl]+bm.x,bm["y"+bl]+bm.y);ah(bn[bp],bt,bm);aK(bn[bp],bt,bm)}}}return bn};aS.fn.drawBezier=function ak(bv){var br=this,bu,bw,bp,bt,bo,bl,bn,bm,bs,bk,bq,bj;for(bu=0;bu<br.length;bu+=1){bw=aX(br[bu]);if(bw){bp=new s(bv);bt=ba(br[bu],bp,bv,ak);if(bp.visible){aF(br[bu],bw,bp);x(br[bu],bw,bp,0);bo=2;bl=1;bw.beginPath();bw.moveTo(bp.x1+bp.x,bp.y1+bp.y);while(Z){bn=bp["x"+bo];bm=bp["y"+bo];bs=bp["cx"+bl];bk=bp["cy"+bl];bq=bp["cx"+(bl+1)];bj=bp["cy"+(bl+1)];if(bn!==ax&&bm!==ax&&bs!==ax&&bk!==ax&&bq!==ax&&bj!==ax){bw.bezierCurveTo(bs+bp.x,bk+bp.y,bq+bp.x,bj+bp.y,bn+bp.x,bm+bp.y);bo+=1;bl+=2}else{break}}bo-=1;bl-=2;aG(br[bu],bw,bp,bp.cx1+bp.x,bp.cy1+bp.y,bp.x1+bp.x,bp.y1+bp.y,bp["cx"+(bl+1)]+bp.x,bp["cy"+(bl+1)]+bp.y,bp["x"+bo]+bp.x,bp["y"+bo]+bp.y);ah(br[bu],bw,bp);aK(br[bu],bw,bp)}}}return br};aS.fn.drawVector=function o(bt){var bp=this,br,by,bo,bq,bn,bm,bl,bx,bw,bk,bv,bj,bu,bz,bs;for(br=0;br<bp.length;br+=1){by=aX(bp[br]);if(by){bo=new s(bt);bq=ba(bp[br],bo,bt,o);if(bo.visible){aF(bp[br],by,bo);x(bp[br],by,bo,0);bn=1;by.beginPath();bx=bj=bz=bk=bo.x;bw=bu=bs=bv=bo.y;by.moveTo(bo.x,bo.y);while(Z){bm=bo["a"+bn];bl=bo["l"+bn];if(bm!==ax&&bl!==ax){bm*=bo._toRad;bm-=(av/2);bj=bz;bu=bs;bz+=(bl*E(bm));bs+=(bl*aM(bm));if(bn===1){bk=bz;bv=bs}by.lineTo(bz,bs);bn+=1}else{break}}aG(bp[br],by,bo,bk,bv,bo.x,bo.y,bj,bu,bz,bs);ah(bp[br],by,bo);aK(bp[br],by,bo)}}}return bp};function k(bj,bk){if(!isNaN(Number(bk.fontSize))){bk.fontSize+="px"}bj.font=bk.fontStyle+" "+bk.fontSize+" "+bk.fontFamily}function p(bm,bl,bp,bk){var bn,bo,bj;if(aL.text===bp.text&&aL.fontStyle===bp.fontStyle&&aL.fontSize===bp.fontSize&&aL.fontFamily===bp.fontFamily&&aL.maxWidth===bp.maxWidth&&aL.lineHeight===bp.lineHeight){bp.width=aL.width;bp.height=aL.height}else{bp.width=bl.measureText(bk[0]).width;for(bj=1;bj<bk.length;bj+=1){bo=bl.measureText(bk[bj]).width;if(bo>bp.width){bp.width=bo}}bn=bm.style.fontSize;bm.style.fontSize=bp.fontSize;bp.height=a7(aS.css(bm,"fontSize"))*bk.length*bp.lineHeight;bm.style.fontSize=bn}}function aw(br,bk){var bm=bk.text,bp=bk.maxWidth,bl=bm.split("\n"),bs=[],bt,bu,bj,bq,bn,bo;for(bj=0;bj<bl.length;bj+=1){bq=bl[bj];bn=bq.split(" ");bt=[];bu="";if(bn.length===1||br.measureText(bq).width<bp){bt=[bq]}else{for(bo=0;bo<bn.length;bo+=1){if(br.measureText(bu+bn[bo]).width>bp){if(bu!==""){bt.push(bu)}bu=""}bu+=bn[bo];if(bo!==(bn.length-1)){bu+=" "}}bt.push(bu)}bs=bs.concat(bt.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return bs}aS.fn.drawText=function bg(bo){var bl=this,bq,bn,bs,bk,bm,bt,bj,br,bp;for(bn=0;bn<bl.length;bn+=1){bq=aS(bl[bn]);bs=aX(bl[bn]);if(bs){bk=new s(bo);bm=ba(bl[bn],bk,bo,bg);if(bk.visible){aF(bl[bn],bs,bk);bs.textBaseline=bk.baseline;bs.textAlign=bk.align;k(bs,bk);if(bk.maxWidth!==ay){bt=aw(bs,bk)}else{bt=bk.text.toString().split("\n")}p(bl[bn],bs,bk,bt);if(bo&&bk.layer){bo.width=bk.width;bo.height=bk.height}x(bl[bn],bs,bk,bk.width,bk.height);br=bk.x;if(bk.align==="left"){if(bk.respectAlign){bk.x+=bk.width/2}else{br-=bk.width/2}}else{if(bk.align==="right"){if(bk.respectAlign){bk.x-=bk.width/2}else{br+=bk.width/2}}}for(bj=0;bj<bt.length;bj+=1){bs.shadowColor=bk.shadowColor;bp=bk.y+(bj*bk.height/bt.length)-((bt.length-1)*bk.height/bt.length)/2;bs.fillText(bt[bj],br,bp);if(bk.fillStyle!=="transparent"){bs.shadowColor="transparent"}bs.strokeText(bt[bj],br,bp)}if(bk._event){bs.beginPath();bs.rect(bk.x-bk.width/2,bk.y-bk.height/2,bk.width,bk.height);ah(bl[bn],bs,bk);bs.closePath()}u(bs,bk)}}}aL=bk;return bl};aS.fn.measureText=function O(bl){var bm=this,bk,bn,bj;bn=bm.getLayer(bl);if(!bn||(bn&&!bn._layer)){bn=new s(bl)}bk=aX(bm[0]);if(bk){k(bk,bn);bj=aw(bk,bn);p(bm[0],bk,bn,bj)}return bn};aS.fn.drawImage=function j(bs){var bp=this,bk,br,bv,bo,bm,bq,bn,bu,bj;function bt(bz,bw,by,bA,bx){aF(bp[bz],bw,bA);if(bA.width===ay&&bA.sWidth===ay){bA.width=bA.sWidth=bn.width}if(bA.height===ay&&bA.sHeight===ay){bA.height=bA.sHeight=bn.height}if(bx){bx.width=bA.width;bx.height=bA.height}if(bA.sWidth!==ay&&bA.sHeight!==ay&&bA.sx!==ay&&bA.sy!==ay){if(bA.width===ay){bA.width=bA.sWidth}if(bA.height===ay){bA.height=bA.sHeight}if(!bA.cropFromCenter){bA.sx+=bA.sWidth/2;bA.sy+=bA.sHeight/2}if((bA.sy-(bA.sHeight/2))<0){bA.sy=(bA.sHeight/2)}if((bA.sy+(bA.sHeight/2))>bn.height){bA.sy=bn.height-(bA.sHeight/2)}if((bA.sx-(bA.sWidth/2))<0){bA.sx=(bA.sWidth/2)}if((bA.sx+(bA.sWidth/2))>bn.width){bA.sx=bn.width-(bA.sWidth/2)}x(bp[bz],bw,bA,bA.width,bA.height);bw.drawImage(bn,bA.sx-bA.sWidth/2,bA.sy-bA.sHeight/2,bA.sWidth,bA.sHeight,bA.x-bA.width/2,bA.y-bA.height/2,bA.width,bA.height)}else{x(bp[bz],bw,bA,bA.width,bA.height);bw.drawImage(bn,bA.x-bA.width/2,bA.y-bA.height/2,bA.width,bA.height)}bw.beginPath();bw.rect(bA.x-bA.width/2,bA.y-bA.height/2,bA.width,bA.height);ah(bp[bz],bw,bA);bw.closePath();u(bw,bA);bf(bw,by,bA)}function bl(bx,bA,bw,bz,bB,by){return function(){bt(bA,bw,bz,bB,by);if(bB.load){bB.load.call(bx,by)}if(bB.layer){bB._args._masks=bz.transforms.masks.slice(0);if(bB._next){aS(bx).drawLayers({clear:G,resetFire:Z,index:bB._next})}}}}for(br=0;br<bp.length;br+=1){bk=bp[br];bv=aX(bp[br]);if(bv){bo=aH(bp[br]);bm=new s(bs);bq=ba(bp[br],bm,bs,j);if(bm.visible){bj=bm.source;bu=bj.getContext;if(bj.src||bu){bn=bj}else{if(bj){if(az[bj]!==ax){bn=az[bj]}else{bn=new aR();bn.src=bj;az[bj]=bn}}}if(bn){if(bn.complete||bu){bl(bk,br,bv,bo,bm,bq)()}else{aS(bn).bind("load",bl(bk,br,bv,bo,bm,bq));bn.src=bn.src}}}}}return bp};aS.fn.createPattern=function aC(bp){var bm=this,br,bl,bn,bq,bo,bj;function bk(){bo=br.createPattern(bn,bl.repeat);if(bl.load){bl.load.call(bm[0],bo)}}br=aX(bm[0]);if(br){bl=new s(bp);bj=bl.source;if(aT(bj)){bn=aS("<canvas />")[0];bn.width=bl.width;bn.height=bl.height;bq=aX(bn);bj.call(bn,bq);bk()}else{bq=bj.getContext;if(bj.src||bq){bn=bj}else{bn=new aR();bn.src=bj}if(bn.complete||bq){bk()}else{aS(bn).bind("load",bk);bn.src=bn.src}}}else{bo=ay}return bo};aS.fn.createGradient=function a8(br){var bp=this,bv,bn,bt,bu=[],bq,bk,bm,bo,bs,bl,bj;bn=new s(br);bv=aX(bp[0]);if(bv){bn.x1=bn.x1||0;bn.y1=bn.y1||0;bn.x2=bn.x2||0;bn.y2=bn.y2||0;if(bn.r1!==ay||bn.r2!==ay){bt=bv.createRadialGradient(bn.x1,bn.y1,bn.r1,bn.x2,bn.y2,bn.r2)}else{bt=bv.createLinearGradient(bn.x1,bn.y1,bn.x2,bn.y2)}for(bo=1;bn["c"+bo]!==ax;bo+=1){if(bn["s"+bo]!==ax){bu.push(bn["s"+bo])}else{bu.push(ay)}}bq=bu.length;if(bu[0]===ay){bu[0]=0}if(bu[bq-1]===ay){bu[bq-1]=1}for(bo=0;bo<bq;bo+=1){if(bu[bo]!==ay){bl=1;bj=0;bk=bu[bo];for(bs=(bo+1);bs<bq;bs+=1){if(bu[bs]!==ay){bm=bu[bs];break}else{bl+=1}}if(bk>bm){bu[bs]=bu[bo]}}else{if(bu[bo]===ay){bj+=1;bu[bo]=bk+(bj*((bm-bk)/bl))}}bt.addColorStop(bu[bo],bn["c"+(bo+1)])}}else{bt=ay}return bt};aS.fn.setPixels=function aU(bs){var bo=this,bk,br,bu,bl,bp,bt,bj,bn,bm,bq;for(br=0;br<bo.length;br+=1){bk=bo[br];bu=aX(bk);if(bu){bl=new s(bs);bp=ba(bk,bl,bs,aU);x(bo[br],bu,bl,bl.width,bl.height);if(bl.width===ay||bl.height===ay){bl.width=bk.width;bl.height=bk.height;bl.x=bl.width/2;bl.y=bl.height/2}if(bl.width!==0&&bl.height!==0){bj=bu.getImageData(bl.x-(bl.width/2),bl.y-(bl.height/2),bl.width,bl.height);bn=bj.data;bq=bn.length;if(bl.each){for(bm=0;bm<bq;bm+=4){bt={r:bn[bm],g:bn[bm+1],b:bn[bm+2],a:bn[bm+3]};bl.each.call(bk,bt,bl);bn[bm]=bt.r;bn[bm+1]=bt.g;bn[bm+2]=bt.b;bn[bm+3]=bt.a}}bu.putImageData(bj,bl.x-(bl.width/2),bl.y-(bl.height/2));bu.restore()}}}return bo};aS.fn.getCanvasImage=function l(bk,bl){var bj=this[0];if(bl===ax){bl=1}return(bj&&bj.toDataURL?bj.toDataURL("image/"+bk,bl):ay)};aS.fn.detectPixelRatio=function aZ(bt){var bm=this,bq,bj,bo,bu,br,bn,bp,bk,bs,bl;for(bo=0;bo<bm.length;bo+=1){bj=bm[bo];bq=aS(bm[bo]);bu=aX(bj);bl=aH(bm[bo]);if(!bl.scaled){br=window.devicePixelRatio||1;bn=bu.webkitBackingStorePixelRatio||bu.mozBackingStorePixelRatio||bu.msBackingStorePixelRatio||bu.oBackingStorePixelRatio||bu.backingStorePixelRatio||1;bp=br/bn;if(bp!==1){bk=bj.width;bs=bj.height;bj.width=bk*bp;bj.height=bs*bp;bj.style.width=bk+"px";bj.style.height=bs+"px";bu.scale(bp,bp)}bl.pixelRatio=bp;bl.scaled=Z;if(bt){bt.call(bj,bp)}}}return bm};aS.support.canvas=(aS("<canvas />")[0].getContext);m.defaults=ae;m.transformShape=x;m.detectEvents=ah;m.closePath=aK;m.getTouchEventName=ac;aS.jCanvas=m}(jQuery,document,Image,Math,parseFloat,true,false,null));